---
title: 📟 SQL & Database (04) - 정규형, 정규화 (1NF, 2NF, 3NF)
author: bokyung
date: 2024-06-24 00:00:00 +0800
toc: true
pin: false
published: true
categories: [Lecture, 한 번에 끝내는 SQL & Database]
tags: [SQL, MariaDB, Database, RDBMS, 정규형, 정규화, 1NF, 2NF, 3NF]
image: https://codingapple.com/wp-content/uploads/2022/09/%EC%83%81%ED%92%88%EC%82%AC%EC%A7%84%EC%98%A8%EB%9D%BC%EC%9D%B8-%EB%B3%B5%EC%82%AC23.png
---
<!-- 글자색 넣기 <span style="color: #239ED0">    </span>  -->
<!-- 띄어쓰기   &nbsp;   -->
<!-- 이미지 사이즈   {: width="60%" height="60%" .normal} -->
<br>
<br>
학습환경 : Windows, MariaDB, DBeaver
<br>
<br>

정처기 공부할 때 냅다 외웠던 도부이결다조....<br>
자세히 알아보자<br>

> ## 제1정규형 (1NF, 1st normal form)

#### : 하나의 셀 안에는 하나의 데이터만.

제1정규화는 각 컬럼이 원자값을 갖도록 만드는 과정을 말한다<br>


- #### 제1정규화를 적용하기 전 

**[주문 테이블]**

| 주문번호  | 고객명              | 주문상품           |
|-----------|---------------------|----------------------|
| 1         | 홍길동              | 컴퓨터, 마우스 |
| 2         | 김철수              | 키보드        |
| 3         | 이영희              | 키보드        |

주문상품 컬럼에 여러개의 상품이 포함되어 있는 상태. <br>
저런 상태가 되면 한 칸에서 해당 정보를 찾을 때 WHERE절 대신 LIKE를 사용해야 한다거나,,<br>
성능이슈가 발생 할 수 있음<br>

- #### 제1정규화를 적용한 후

별도의 행으로 분리하여 전화번호 컬럼을 원자값으로 만든다. <br>

|주문번호 | 고객명  | 상품  |
|--------|---------|------|
|1       | 홍길동  | 컴퓨터|
|1       | 홍길동  | 마우스|
|2       | 김철수  | 키보드|
|3       | 이영희  | 키보드|


이 작업이 완료된 테이블을 제1정규형이라고 함
<br>
<br>

> ## 제2정규형 (2NF, 2nd normal form)

#### : 현재 테이블의 주제와 관련없는 컬럼은 다른 테이블로.

제1정규화(1NF)를 만족하면서 부분 함수적 종속성(partial dependency)을 제거하는 과정을 말한다<br>

아까 제1정규화를 만족하게 만들었던 테이블에 '가격'이라는 컬럼을 추가해서 예시를 들어보도록 하겠다 <br>

- #### 제2정규화를 적용하기 전 

**[주문 테이블]**

| 주문번호 | 고객명 | 상품     | 가격     |
|---------|--------|----------|----------|
| 1       | 홍길동 | 컴퓨터   | 1500000  |
| 1       | 홍길동 | 마우스   | 50000    |
| 2       | 김철수 | 키보드   | 100000   |
| 3       | 이영희 | 키보드   | 100000   |


상품에 대한 가격 컬럼을 추가하였다. <br>
여기서 만약 키보드의 가격이 변경되면? <br>
-> 2개 행을 각각 수정하면 된다.<br>

그런데 키보드를 주문한 사람이 100명이라면? <br>
100개의 행을 다 수정해야 하는 상황이 발생하겠지... <br>
그런 상황을 방지하기 위해서 가격 컬럼을 잘라내어 새로운 테이블을 만들어 분리시키자 <br>

- #### 제2정규화를 적용한 후

**[주문 테이블]**

| 주문번호 | 고객명 | 상품     |
|---------|--------|----------|
| 1       | 홍길동 | 컴퓨터   |
| 1       | 홍길동 | 마우스   |
| 2       | 김철수 | 키보드   |
| 3       | 이영희 | 키보드   |

**[상품 테이블]**

| 상품     | 가격     |
|----------|----------|
| 컴퓨터   | 1500000  |
| 마우스   | 50000    |
| 키보드   | 100000   |


상품 가격을 별도의 테이블로 분리하였다<br>
이 작업이 완료된 테이블을 제2정규형이라고 함<br>

**primary key**는 행을 서로 구분할 수 있는 유니크한 데이터를 담고있는 컬럼이다 <br>
근데 가끔은 하나의 컬럼만으로 **primary key**를 정할 수 없는 경우가 있음 <br>
두개 컬럼을 합친 **primary key**를 **composite primary key** 라고 함 <br>
<br>
**composite primary key** 중에 하나의 컬럼에만 종속되어 있는 컬럼을 **partial dependency**(부분 함수적 종속)가 있다고 표현한다<br>
그러니까 아까 테이블에서 **'주문번호'**와 **'상품'**을 합친 것이 **composite primary key** <br>
그런데 **'가격'** 컬럼은 **'상품'**에 따라 결정될 뿐 **'주문번호'**와는 상관이 없다<br>
이런 경우를 **'가격'** 컬럼은 **partial dependency**가 있다고 표현한다<br>
<br>
그래서 이 partial dependency가 있는 **'가격'** 컬럼을 다른 테이블로 빼면 제2정규형 테이블이 된다!
<br>
<br>

> ## 제3정규형 (3NF, 3rd normal form)

#### : 일반 컬럼에 종속된 컬럼은 다른 테이블로.


아까 제2정규화를 만족하게 만들었던 주문 테이블에 '카테고리' 컬럼을 추가해서 예시를 들어보도록 하겠다 <br>

- #### 제3정규화를 적용하기 전 

**[주문 테이블]**

| 주문번호 | 고객명 | 상품     | 카테고리     |
|---------|--------|----------|--------------|
| 1       | 홍길동 | 컴퓨터   | 전자제품     |
| 1       | 홍길동 | 마우스   | 주변기기     |
| 2       | 김철수 | 키보드   | 주변기기     |
| 3       | 이영희 | 키보드   | 주변기기     |

주문번호와 고객명을 composite primary key로 사용하는 주문테이블에서 카테고리는 일반 컬럼인 상품에만 관련이 있음<br>
즉, '상품'은 '주문번호'와 '고객명'에 종속되어 있는데 '카테고리'는 '상품'에 종속되어있다<br>
이걸 분리하는 것<br>


- #### 제3정규화를 적용한 후

**[주문 테이블]**

| 주문번호 | 고객명 | 상품     |
|---------|--------|----------|
| 1       | 홍길동 | 컴퓨터   |
| 1       | 홍길동 | 마우스   |
| 2       | 김철수 | 키보드   |
| 3       | 이영희 | 키보드   |

**[상품 테이블]**

| 상품     | 카테고리     |
|----------|--------------|
| 컴퓨터   | 전자제품     |
| 마우스   | 주변기기     |
| 키보드   | 주변기기     |


이 작업이 완료된 테이블을 제3정규형이라고 함<br>


